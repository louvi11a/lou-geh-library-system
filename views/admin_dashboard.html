<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - Lou Geh Library System</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="../css/style.css">
    <script src="../js/admin_dashboard.js"></script> 

</head>
<body>
    <header class="d-flex justify-content-between align-items-center bg-light p-3">
        <div class="flex-grow-1 text-center">
            <h1>Welcome to Admin Dashboard</h1>
        </div>
        <button id="logoutButton" class="btn btn-danger">Logout</button>
    </header>
    
    
    <main>
        <section class="action-buttons">
            <nav class="nav nav-pills nav-fill">
                <a class="nav-link" id="btnViewBooks" href="#viewBooksModal" data-bs-toggle="modal">View Books List</a>

                <a class="nav-link" id="btnAddBook" href="#addBookModal" data-bs-toggle="modal">Add Book</a>
                <a class="nav-link" id="btnAddPublisher" href="#addPublisherModal" data-bs-toggle="modal">Add Publisher</a>
                <a class="nav-link" id="btnAddCategory" href="#addCategoryModal" data-bs-toggle="modal">Add Category</a>
                <a class="nav-link" id="btnAddUser" href="#addUserModal" data-bs-toggle="modal">Add Reader</a>
                <a class="nav-link" id="btnViewReaders" href="#viewReadersModal" data-bs-toggle="modal">View Readers</a>
                <a class="nav-link" id="btnViewBorrowedBooks" href="#viewBorrowedBooksModal" data-bs-toggle="modal">View Borrow History</a>

            </nav>
        </section>

<!-- Modal for displaying all books -->
<div id="viewBooksModal" class="modal fade" tabindex="-1" aria-labelledby="viewBooksModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div id="booksTableContainer" class="table-responsive">
                    <!-- Table will be dynamically inserted here -->
                </div>
                <div id="booksTableMessage" class="alert alert-info mt-3 d-none">
                    <!-- Message for no books found will be inserted here -->
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal -->
<div class="modal fade" id="viewReadersModal" tabindex="-1" aria-labelledby="viewReadersModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div id="readersTableContainer"></div>
          <div id="readersTableMessage"></div>
        </div>

      </div>
    </div>
  </div>
  
        <!-- Modals for adding book, publisher, category, member -->
        <div id="addBookModal" class="modal fade" tabindex="-1" aria-labelledby="addBookModalLabel" aria-hidden="true">
            <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addBookModalLabel">Add Book</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                    <div class="modal-body">
                <form id="addBookForm" action="../controllers/BookController.php" method="post">
                    <input type="text" id="isbn" name="isbn" placeholder="ISBN" required>
                    <input type="text" id="title" name="title" placeholder="Title" required>
                    <input type="text" id="author" name="author" placeholder="Author" required>
                    <input type="number" id="publication_year" name="publication_year" placeholder="Publication Year" required>
                    <input type="number" id="number_of_pages" name="number_of_pages" placeholder="Number of Pages" required>
                    <select id="publisher_id" name="publisher_id" class="form-select mb-2" required>
                        <option value="">Select Publisher</option>
                        <!-- Publishers will be dynamically populated here -->
                    </select>
                              
                    <input type="hidden" name="action" value="addBook">
                    <h3>Select Parent Category:</h3>
                    <select id="bookCategories" name="category[]" multiple class="form-select mb-2">
                        <!-- Categories will be dynamically populated here -->
                    </select>
                    <button type="submit" class="btn btn-primary">Add Book</button>
                </form>
                <div id="addBookMessage"></div>
            </div>
        </div>
    </div>
</div>
<div id="addPublisherModal" class="modal fade" tabindex="-1" aria-labelledby="addPublisherModal" aria-hidden="true">
    <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addPublisherModalLabel">Add Publisher</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                <form id="addPublisherForm" action="../controllers/AdminController.php" method="post">
                    <input type="text" id="name" name="name" placeholder="Publisher Name" required>
                    <input type="text" id="location" name="location" placeholder="Location" required>
                    <input type="hidden" name="action" value="addPublisher">
                    <button type="submit" class="btn btn-primary">Add Publisher</button>
                </form>
                <div id="addPublisherMessage"></div> 
            </div>
        </div>
    </div>
</div>

<div id="addCategoryModal" class="modal fade" tabindex="-1" aria-labelledby="addCategoryModal" aria-hidden="true">
    <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addCategoryModalLabel">Add Category</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" >

                <form id="addCategoryForm" action="../controllers/CategoryController.php" method="post">
                    <input type="text" id="categoryName" name="categoryName" placeholder="Category Name" required>
                    <!-- Optional: Select parent category -->
                    <select id="parentCategory" name="parentCategory">
                        <option value="">Select Parent Category</option>
                    </select>
                    <input type="hidden" name="action" value="addCategory">
                    <button type="submit" class="btn btn-primary">Add Category</button>

                </form>
                <div id="addCategoryMessage"></div>
            </div>
        </div>
    </div>
</div>

<div id="addUserModal" class="modal fade" tabindex="-1" aria-labelledby="addUserModal" aria-hidden="true">
    <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addUserModal">Add User</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">

                <form id="addUserForm" action="../controllers/AdminController.php" method="post">
                    <input type="text" id="username" name="username" placeholder="Username" required>
                    <input type="password" id="password" name="password" placeholder="Password" required>
                    <input type="text" id="family_name" name="family_name" placeholder="Family Name" required>
                    <input type="text" id="first_name" name="first_name" placeholder="First Name" required>
                    <input type="text" id="city" name="city" placeholder="City" required>
                    <input type="date" id="dob" name="dob" placeholder="Date of Birth" required>
                    <input type="hidden" name="action" value="adduser">
                    <button type="submit" class="btn btn-primary">Add User</button>
                </form>
                <div id="addUserMessage"></div>
            </div>
            </div>
        </div>
</div>

<!-- Modal for displaying all books -->
<div id="viewBooksModal" class="modal fade" tabindex="-1" aria-labelledby="viewBooksModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="viewBooksModalLabel">All Books</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div id="booksTableContainer">
                </div>
                <div id="booksTableMessage" class="alert alert-info mt-3 d-none">
                    <!-- Message for no books found will be inserted here -->
                </div>
            </div>
        </div>
    </div>
</div>




<!-- Modal for displaying borrowed books -->
<div id="viewBorrowedBooksModal" class="modal fade" tabindex="-1" aria-labelledby="viewBorrowedBooksModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div id="borrowedBooksTableContainer">
                    <!-- Table will be dynamically inserted here -->
                </div>
                <div id="borrowedBooksTableMessage" class="alert alert-info mt-3 d-none">
                    <!-- Message for no borrowed books found will be inserted here -->
                </div>
            </div>
        </div>
    </div>
</div>




    </main>
    <footer>
        <p>&copy; 2024 Lou Geh Library System. All rights reserved.</p>
    </footer>
</body>
</html>
